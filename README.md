# Challenge 1B: Persona-Driven Document Intelligence

## Approach
This solution ranks document sections based on persona and job relevance using TF‑IDF vectorization and cosine similarity.
It is designed to work for any persona or job file provided during evaluation.

### Key Features:
- Generic persona/job handling for any domain
- TF-IDF based semantic similarity scoring
- Top-10 section ranking system
- Fast CPU-only processing

## Libraries Used
- **scikit-learn**: TF‑IDF vectorization and cosine similarity
- **numpy**: Numerical operations
- **json, pathlib, os**: I/O and file handling

## Logic and Design
This model simulates a reader’s intent by combining persona and job description into a semantic query. All extracted sections from Challenge 1A documents are enriched with contextual content and passed through a TF-IDF + cosine similarity pipeline to compute relevance scores. We further boost scores based on domain-specific patterns tailored to the persona (e.g., researchers prefer "Methodology", students prefer "Introduction"). The top 10 sections and 15 refined sub-sections are ranked and output in a clean JSON structure.

### Algorithm:
1. Load JSON documents generated by Challenge 1A from /app/input.
2. Load persona and job description from persona_job.json (placed in /app/input).
3. Extract all sections with metadata.
4. Combine persona and job description into a single query vector.
5. Calculate TF‑IDF vectors for all sections.
6. Compute cosine similarity between each section and the query.
7. Rank and return top 10 sections with importance ranking.

## Expected Inputs/Outputs
### Input:
1. JSON outputs from Challenge 1A:
Place one or more JSON files generated by Challenge 1A inside the input/ folder.
These are the outlines you extracted earlier. For example:
```bash
Challenge_1B/
├─ input/
│  ├─ sample.json
│  ├─ thesis_outline.json
│  └─ report_outline.json
```
2. Persona configuration (persona_job.json):
Place a single JSON file named persona_job.json in the root of Challenge 1B folder.
This file defines:
- persona → Who is reading the document
- job_to_be_done → What task they are performing
Example structure of persona_job.json:
```bash
{
"persona": "PhD Researcher in Cartography",
"job_to_be_done": "Prepare a comprehensive literature review focusing on methodologies and origins in modern cartography"
}
 ```
This file must be in the root directory, alongside your main.py, Dockerfile, etc.
Example:
```bash
Challenge_1B/
├─ input/
│  ├─ sample.json
│  └─ another_outline.json
├─ output/
├─ main.py
├─ Dockerfile
├─ requirements.txt
├─ README.md
└─ persona_job.json   ✅ Place it here
```
## Getting Started

### 1. Clone the Repository
```bash
https://github.com/Radi8ion/Adobe_1B/tree/main
```
### 2. Docker Installation (If Not Already Installed)
This solution runs entirely in a Docker container. Please ensure Docker is installed and running on your machine before proceeding.

#### Install Docker:
- Windows & macOS: Download Docker Desktop from https://www.docker.com/products/docker-desktop
- Linux: Follow the official instructions here: https://docs.docker.com/engine/install/
  
After installation, verify using:
```bash
docker --version
```
### 3. Add Input Files
Copy the .json files generated by Challenge 1A (PDF outlines) into the input/ folder.

Example structure:
```bash
Challenge_1B/
├─ input/
│  ├─ sample.json
│  ├─ thesis_outline.json
```

### 4. Create persona_job.json
Place a file named persona_job.json in the root folder, alongside main.py.
✅ Sample:
```bash
{
  "persona": "PhD Researcher in Cartography",
  "job_to_be_done": "Prepare a comprehensive literature review focusing on methodologies and origins in modern cartography"
}
```

## 5. How to Build and Run

### Build:
```bash
docker build --platform linux/amd64 -t doc-intelligence:v1 .
```
Run (Windows PowerShell):
```bash
docker run --rm -v ${PWD}/input:/app/input -v ${PWD}/output:/app/output --network none doc-intelligence:v1
```
Run (Windows CMD):
```bash
docker run --rm -v %cd%/input:/app/input -v %cd%/output:/app/output --network none doc-intelligence:v1
```
Run (Linux/macOS):
```bash
docker run --rm -v %cd%/input:/app/input -v %cd%/output:/app/output --network none doc-intelligence:v1
```
### 6. View the Output
After successful execution, you will see a new file created:
```bash
output/output.json
```
Folder Structure
```bash
Challenge_1B/
├─ input/
├─ output/
├─ main.py
├─ Dockerfile
├─ requirements.txt
├─ README.md
└─ persona_job.json   
```
## Note:
Place your persona/job JSON file in the root directory with the name test_persona_job.json.
The program will read it from /app/persona_job.json inside the container.

## Performance
- Processes 3-10 documents in under 60 seconds
- Works offline, CPU-only
- Model size under 1GB

### Output:
- An output.json file in output/ containing:
- metadata with persona/job info
- Top‑10 ranked sections
- Generated sub‑sections with refined context

## Output Format
```bash
{
  "metadata": {
    "persona": "<persona string from persona_job.json>",
    "job_to_be_done": "<job string from persona_job.json>",
    "documents": [
      "sample.json",
      "another_outline.json"
    ],
    "processing_timestamp": "2025-07-28T10:15:00.123456"
  },
  "sections": [
    {
      "document": "sample.json",
      "page": 9,
      "section_title": "Literature Review and Origins",
      "importance_rank": 1
    },
    {
      "document": "sample.json",
      "page": 4,
      "section_title": "Methodology Overview",
      "importance_rank": 2
    }
    // ... up to top 10 sections
  ],
  "sub_sections": [
    {
      "document": "sample.json",
      "page": 9,
      "refined_text": "[Detailed Analysis] From a research perspective, this aspect of Literature Review and Origins involves detailed examination of detailed analysis. This includes methodological considerations, empirical evidence, and analytical frameworks. This content is particularly relevant for systematic literature analysis and comparison with existing research. Building on the foundation of Literature Review and Origins, this refined analysis provides targeted insights.",
      "importance_rank": 1
    },
    {
      "document": "sample.json",
      "page": 4,
      "refined_text": "[Practical Applications] From a research perspective, this aspect of Methodology Overview involves detailed examination of practical applications. This includes methodological considerations, empirical evidence, and analytical frameworks. Building on the foundation of Methodology Overview, this refined analysis provides targeted insights.",
      "importance_rank": 2
    }
    // ... up to top 15 sub-sections
  ]
}
```
